<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dr.Link - Find the Best Doctors</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/landing.css') }}"></head>
<body>
    <!-- Hexagon Background -->
    <div class="hexagon-background">
        <svg id="hexagonGrid"></svg>
    </div>

    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-brand">Dr.Link</div>
        <div class="nav-links">
            <a href="explore.html" class="nav-link">Explore</a>
            <a href="login.html" class="nav-link">Sign In</a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="content-container">
        <div class="main-content">
            <h1 class="title">
                Welcome to <span class="title-brand">Dr. Link</span>
                <img src="/static/img/Vector.png" alt="Dr.Link Logo" class="logo-icon">
            </h1>

            <div class="search-section">
                <div class="search-container">
                    <div class="search-wrapper" id="searchWrapper">
                        <input type="text" class="search-bar" placeholder="Find the best doctors..." id="searchInput">
                        <button class="search-btn">Search</button>
                    </div>
                </div>
                <button class="ask-ai-btn" id="askAiBtn">Ask AI</button>
            </div>
        </div>
    </div>

    <script>
        // Search functionality
        const askAiBtn = document.getElementById('askAiBtn');
        const searchWrapper = document.getElementById('searchWrapper');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.querySelector('.search-btn');

        askAiBtn.addEventListener('click', () => {
            searchWrapper.classList.toggle('glow');
            if (searchWrapper.classList.contains('glow')) {
                searchInput.focus();
            }
        });

        searchBtn.addEventListener('click', () => {
            const query = searchInput.value.trim();
            if (query) {
                console.log('Searching for:', query);
            }
        });

        searchInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') searchBtn.click();
        });

        // Hexagon grid
        const svg = document.getElementById('hexagonGrid');
        const hexSize = 250;
        const padding = 130;
        const hexWidth = hexSize * 2;
        const hexHeight = Math.sqrt(3) * hexSize;
        const hSpacing = hexWidth * 0.75 + padding;
        const vSpacing = hexHeight + padding;
        const cols = Math.ceil(window.innerWidth / hSpacing) + 4;
        const rows = Math.ceil(window.innerHeight / vSpacing) + 4;

        function createHexPath(x, y, size, radius) {
            const points = [];
            for (let i = 0; i < 6; i++) {
                const angle = (Math.PI / 3) * i + (Math.PI / 6);
                points.push({ x: x + size * Math.cos(angle), y: y + size * Math.sin(angle) });
            }

            let path = '';
            for (let i = 0; i < points.length; i++) {
                const p1 = points[i];
                const p2 = points[(i + 1) % points.length];
                const p0 = points[(i - 1 + points.length) % points.length];

                const dx1 = p1.x - p0.x, dy1 = p1.y - p0.y;
                const len1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);
                const dx2 = p2.x - p1.x, dy2 = p2.y - p1.y;
                const len2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);

                const offset1 = Math.min(radius, len1 / 2);
                const offset2 = Math.min(radius, len2 / 2);

                const start = { x: p1.x - (dx1 / len1) * offset1, y: p1.y - (dy1 / len1) * offset1 };
                const end = { x: p1.x + (dx2 / len2) * offset2, y: p1.y + (dy2 / len2) * offset2 };

                if (i === 0) path += `M ${start.x},${start.y} `;
                path += `Q ${p1.x},${p1.y} ${end.x},${end.y} `;
                
                if (i < points.length - 1) {
                    const nextStart = { x: p2.x - (dx2 / len2) * offset2, y: p2.y - (dy2 / len2) * offset2 };
                    path += `L ${nextStart.x},${nextStart.y} `;
                }
            }
            return path + 'Z';
        }

        const hexagons = [];
        for (let row = 0; row < rows; row++) {
            for (let col = 0; col < cols; col++) {
                const x = col * hSpacing;
                const y = row * vSpacing + (col % 2 ? vSpacing / 2 : 0);

                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
                path.setAttribute('d', createHexPath(x, y, hexSize, 20));
                path.classList.add('hexagon');
                svg.appendChild(path);
                hexagons.push(path);
            }
        }

        let currentPath = null;

        function animateHex(path) {
            if (currentPath) {
                currentPath.setAttribute('stroke', 'rgba(0, 191, 255, 0.128)');
                currentPath.style.strokeWidth = '0.8';
                currentPath.style.strokeDasharray = '';
                currentPath.style.filter = '';
            }

            currentPath = path;
            const len = path.getTotalLength();
            path.style.strokeDasharray = len;
            path.style.strokeDashoffset = len;
            path.setAttribute('stroke', 'rgba(0, 255, 255, 1)');
            path.style.strokeWidth = '3';
            path.style.filter = 'drop-shadow(0 0 8px rgba(0, 255, 255, 1))';

            const start = Date.now();
            function draw() {
                const progress = Math.min((Date.now() - start) / 2000, 1);
                path.style.strokeDashoffset = len * (1 - progress);
                if (progress < 1) requestAnimationFrame(draw);
            }
            draw();
        }

        setInterval(() => {
            animateHex(hexagons[Math.floor(Math.random() * hexagons.length)]);
        }, 2500);
    </script>
</body>
</html>